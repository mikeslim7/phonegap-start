<!doctype html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<title>Sculder</title>
		<link rel="stylesheet" href="css/template-style.css">
		<script src="phonegap.js"></script>
		<script src="childbrowser.js"></script>
		<script src="js/jquery-1.9.1.min.js"></script>
		<!--
		<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
		<script src="js/jquery.ui.map.full.min.js" type="text/javascript"></script>
		-->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGFQafG8bAoZodkrM1bFL-KzQZq6lupCo&sensor=true"></script>

	</head>
	<body>
		<header>
			<h1>Tab Based</h1>
		</header>
		<div id="wrapper">
			<div id="main-content">
				<div id="pages">
					<div id="map" class="current">
						<div id="map-canvas"></div>
					</div>
					<div id="camera">
						In Camera
					</div>
					<div id="twitter">
						In Twitter
					</div>
				</div>
			</div>
		</div>
		<footer>
			<ul id="tab-bar">
				<li>
					<a href="#map" id="mapbtn" class="active_tab" onclick="loadPageReq('map')">Map</a>
				</li>
				<li>
					<a href="#camera" id="camerabtn" onclick="loadPageReq('camera')">Camera</a>
				</li>
				<li>
					<a href="#twitter" id="twitterbtn" onclick="loadPageReq('twitter')">Twitter</a>
				</li>
			</ul>
		</footer>

		<script type="text/javascript">
			document.addEventListener("deviceready", onDeviceReady, false);
			google.maps.event.addDomListener(window, 'load', initializeMap);
			//google.maps.event.addDomListener(window, 'load', initializeMapTwo);
			//window.mymap = '';

			function onDeviceReady() {
				//mapdiv = document.getElementById('map');
				//mapdiv.innerHTML = "Here is the Map";
				//$('#map').html('Map Nayo?');
				//google.maps.event.addDomListener(window, 'load', initializeMap);
				//initializeMap();
			}

			/* function loadMapPage() {
			 //mapdiv = document.getElementById('map');
			 //mapdiv.innerHTML = "Wanting Map";
			 $('#map').html('Map Nayo?');
			 }

			 function loadCameraPage() {
			 //mapdiv = document.getElementById('map');
			 //mapdiv.innerHTML = "Wanting Camera";
			 $('#map').html('Camera Nayo?');
			 }

			 function loadTwitterPage() {
			 //mapdiv = document.getElementById('map');
			 //mapdiv.innerHTML = "Wanting Twitter";
			 $('#map').html('Twitter Nayo?');
			 }*/

			function initializeMap() {
				//alert('Init Map');
				var mapOptions = {
					center : new google.maps.LatLng(-1.268788, 36.806438),
					zoom : 8,
					mapTypeId : google.maps.MapTypeId.ROADMAP
				};
				mymap = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
				//alert('Inited Map');
			}

			function loadPageReq(pageid) {

				if ($('#pages div.current').attr('id') != pageid) {
					$('#pages div').removeClass('current').animate({
						opacity : 0
					}, 'fast');
					$('.active_tab').removeClass('active_tab');
					$('#' + pageid).addClass('current').animate({
						opacity : 1
					}, 'fast');
					$('#' + pageid + 'btn').addClass('active_tab');

				}

				if (pageid == 'map') {
					console.log('Load Map');
					$('#map-canvas').animate({
						opacity : 1
					}, 'fast');
					initializeMap();
				}

			}

			function initializeMapTwo() {
				// Also works with: var yourStartLatLng = '59.3426606750, 18.0736160278';
				var yourStartLatLng = new google.maps.LatLng(59.3426606750, 18.0736160278);
				$('#map_canvas').gmap({
					'center' : yourStartLatLng
				});
			}

			$(function() {
				function unifyHeights() {
					var windowheight = $(window).height();
					var remaining_unused_height = parseInt(windowheight) - (parseInt($('header').css('height')) + parseInt($('footer').css('height')));
					//console.log(remaining_unused_height);
					$('#map-canvas').css('height', remaining_unused_height + 'px');
					//$('#map').children('div').each(function() {
					//	var height = $(this).outerHeight();
					//	alert(height);
					//if (height > maxHeight) {
					//	maxHeight = height;
					//}
					//});
					//$('#navigation, #content').css('height', maxHeight);
				}

				unifyHeights();
			});

			//document.getElementById("mapbtn").addEventListener('touchstart',loadPageReq('map'));
			//document.getElementById("camerabtn").addEventListener('touchstart',loadPageReq('camera'));
			//document.getElementById("twitterbtn").addEventListener('touchstart',loadPageReq('twitter'));
			function button1Pressed() {
				alert('Button Camera Pressed');
			}

		</script>
	</body>
</html>
